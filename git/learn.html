<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>git | korn的博客</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="专注 前端 技术栈分享，从前端到Node.js再到数据库">
    
    <link rel="preload" href="/blog/assets/css/0.styles.a4691601.css" as="style"><link rel="preload" href="/blog/assets/js/app.016ecbb7.js" as="script"><link rel="preload" href="/blog/assets/js/2.928a6fe7.js" as="script"><link rel="preload" href="/blog/assets/js/8.c67934ea.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.77b39606.js"><link rel="prefetch" href="/blog/assets/js/11.62e42ab5.js"><link rel="prefetch" href="/blog/assets/js/12.f45a62f5.js"><link rel="prefetch" href="/blog/assets/js/13.2602d9e7.js"><link rel="prefetch" href="/blog/assets/js/14.72eeec06.js"><link rel="prefetch" href="/blog/assets/js/15.933c999c.js"><link rel="prefetch" href="/blog/assets/js/16.fa841be8.js"><link rel="prefetch" href="/blog/assets/js/17.16734f12.js"><link rel="prefetch" href="/blog/assets/js/18.05c8eb0b.js"><link rel="prefetch" href="/blog/assets/js/19.42269bb6.js"><link rel="prefetch" href="/blog/assets/js/20.3bb5a14c.js"><link rel="prefetch" href="/blog/assets/js/21.f33e7cfe.js"><link rel="prefetch" href="/blog/assets/js/22.b073c1aa.js"><link rel="prefetch" href="/blog/assets/js/23.971df460.js"><link rel="prefetch" href="/blog/assets/js/24.7fc7e003.js"><link rel="prefetch" href="/blog/assets/js/25.4c8c73e4.js"><link rel="prefetch" href="/blog/assets/js/26.6b941ac2.js"><link rel="prefetch" href="/blog/assets/js/27.38b0556e.js"><link rel="prefetch" href="/blog/assets/js/28.c824e37c.js"><link rel="prefetch" href="/blog/assets/js/29.44a1851e.js"><link rel="prefetch" href="/blog/assets/js/3.6ab95d19.js"><link rel="prefetch" href="/blog/assets/js/30.50b73b19.js"><link rel="prefetch" href="/blog/assets/js/4.ba3164ba.js"><link rel="prefetch" href="/blog/assets/js/5.75a3592b.js"><link rel="prefetch" href="/blog/assets/js/6.0377ba0c.js"><link rel="prefetch" href="/blog/assets/js/7.888c74f3.js"><link rel="prefetch" href="/blog/assets/js/9.d9926b68.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.a4691601.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">korn的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/web/Interview/learn.html" class="nav-link">
  面试题
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/css/css.html" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/js/js.html" class="nav-link">
  js
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/vue/vue.html" class="nav-link">
  vue
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/network/network.html" class="nav-link">
  network
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/webpack/learn.html" class="nav-link">
  webpack
</a></li></ul></div></div><div class="nav-item"><a href="/blog/node/learn.html" class="nav-link">
  node
</a></div><div class="nav-item"><a href="/blog/dataBase/mysql/learn.html" class="nav-link">
  数据库
</a></div><div class="nav-item"><a href="/blog/git/learn.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  git
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/web/Interview/learn.html" class="nav-link">
  面试题
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/css/css.html" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/js/js.html" class="nav-link">
  js
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/vue/vue.html" class="nav-link">
  vue
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/network/network.html" class="nav-link">
  network
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/webpack/learn.html" class="nav-link">
  webpack
</a></li></ul></div></div><div class="nav-item"><a href="/blog/node/learn.html" class="nav-link">
  node
</a></div><div class="nav-item"><a href="/blog/dataBase/mysql/learn.html" class="nav-link">
  数据库
</a></div><div class="nav-item"><a href="/blog/git/learn.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  git
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog/git/learn.html" aria-current="page" class="active sidebar-link">学习</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/git/learn.html#git" class="sidebar-link">git</a></li><li class="sidebar-sub-header"><a href="/blog/git/learn.html#git远程分支管理" class="sidebar-link">#Git远程分支管理</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="git"><a href="#git" class="header-anchor">#</a> git</h2> <h3 id="常用"><a href="#常用" class="header-anchor">#</a> 常用</h3> <ol><li>git 删除本地分支：git branch -D [branch_name]</li> <li>git 删除远程分支：git push origin --delete [branch_name]</li> <li>git 把本地分支推送到远程：git push --set-upstream origin new_branch</li> <li>git 取消合并：git reset --hard HEAD</li> <li>git 撤销本地commit：git reset --soft HEAD^</li> <li>git 更新本地分支：git remote update origin --prune</li> <li>git 远程前置覆盖本地：git fetch --all &amp;&amp; git reset --hard origin/[branch_name] &amp;&amp; git pull</li> <li>git 回滚到某个版本：git reset --hard [branch_version]</li> <li>git 把本地强制覆盖到远程：git push -f -u origin [branch_name]</li> <li>Git 拉取某一次提交的代码版本到本地分支：git checkout -b 分之名 远程仓库的commitId</li></ol> <h3 id="git暂存管理"><a href="#git暂存管理" class="header-anchor">#</a> Git暂存管理</h3> <ol><li>git stash                        # 暂存</li> <li>git stash list                   # 列所有stash</li> <li>git stash apply                  # 恢复暂存的内容</li> <li>git stash drop                   # 删除暂存区</li></ol> <h2 id="git远程分支管理"><a href="#git远程分支管理" class="header-anchor">#</a> #Git远程分支管理</h2> <ol><li>git pull                         # 抓取远程仓库所有分支更新并合并到本地</li> <li>git pull --no-ff                 # 抓取远程仓库所有分支更新并合并到本地，不要快进合并</li> <li>git fetch origin                 # 抓取远程仓库更新</li> <li>git merge origin/master          # 将远程主分支合并到本地当前分支</li> <li>git co --track origin/branch     # 跟踪某个远程分支创建相应的本地分支</li> <li>git co -b &lt;local_branch&gt; origin/&lt;remote_branch&gt;  # 基于远程分支创建本地分支，功能同上</li> <li>git push                         # push所有分支</li> <li>git push origin master           # 将本地主分支推到远程主分支</li> <li>git push -u origin master        # 将本地主分支推到远程(如无远程主分支则创建，用于初始化远程仓库)</li> <li>git push origin &lt;local_branch&gt;   # 创建远程分支， origin是远程仓库名</li> <li>git push origin &lt;local_branch&gt;:&lt;remote_branch&gt;  # 创建远程分支</li> <li>git push origin :&lt;remote_branch&gt;  #先删除本地分支(git br -d )，然后再push删除远程分支</li></ol> <h3 id="git-提交"><a href="#git-提交" class="header-anchor">#</a> git 提交</h3> <p>####用commitlint规范团队的git提交信息
在一个团队中，每个人的git的commit信息都不一样，五花八门，没有一个机制很难保证规范化，如何才能规范化呢？可能你想到的是git的hook机制，去写shell脚本去实现。这当然可以，其实JavaScript有一个很好的工具可以实现这个模板，它就是commitlint。
接下来将会讲解如何一步步的使用commitlint。
一般情况下，commitlint会用在git的hook回调中，最简单的就是和 husky一起使用。
前提条件是工程是通过git管理的，如果没有先自己创建一个demo工程，用git初始化一下。
比如创建一个commitlint-test工程：</p> <p>mkdir commitlint-test cd commitlint-test git init
npm 工程初始化</p> <p>npm init
安装commitlint</p> <h3 id="安装依赖"><a href="#安装依赖" class="header-anchor">#</a> 安装依赖</h3> <p>npm install --save-dev @commitlint/{cli,config-conventional}
在工程更目录添加配置文件commitlint.config.js</p> <p>echo &quot;module.exports = {extends: ['@commitlint/config-conventional']};&quot; &gt; commitlint.config.js
commitlint.config.js文件内容如下：</p> <p>module.exports = {     extends: ['@commitlint/config-conventional'], };
extends字段表示扩展子@commitlint/config-conventional的配置。一般扩展这个就足够了，这是利用的commitlint的配置宽展机制，可以继承其他人的配置。</p> <h3 id="安装husky"><a href="#安装husky" class="header-anchor">#</a> 安装husky</h3> <p>husky是一个git hook的管理工具，实现了大部分的git hook，有兴趣的可以自行google。
npm install --save-dev husky
在package.json中配置husky. hooks
// package.json {   &quot;husky&quot;: {     &quot;hooks&quot;: {       &quot;commit-msg&quot;: &quot;commitlint -E HUSKY_GIT_PARAMS&quot;     }     } }
通过HUSKY_GIT_PARAMS传递参数，-E|--env用于指向相关的编辑文件。</p> <h3 id="测试"><a href="#测试" class="header-anchor">#</a> 测试</h3> <p>如果不符合规则，讲无法使用git进行commit，比如下面的，如果想知道有什么规则，可以继续往下看。
git commit -m &quot;foo: this will fail&quot; husky &gt; npm run -s commitmsg ⧗   input: foo: this will fail ✖   type must be one of [build, chore, ci, docs, feat, fix, perf, refactor, revert, style, test] [type-enum] ✖   found 1 problems, 0 warnings husky &gt; commit-msg hook failed (add --no-verify to bypass) git commit -m &quot;chore: lint on commitmsg&quot; husky &gt; npm run -s commitmsg ⧗   input: chore: lint on commitmsg ✔   found 0 problems, 0 warnings</p> <h3 id="规则"><a href="#规则" class="header-anchor">#</a> 规则</h3> <p>git commit的消息这样组成：
其中header是必须有的，body，footer可选。</p> <p>header  --空一行 body --空一行 footer
header的规则
Commit message格式，注意冒号后面有空格
<type>: <subject>
type
用于说明 commit 的类别，只允许使用下面7个标识，也可以自己在配置文件中更改或者扩展。
标准类型如下：
feat：新功能（feature）
fix：修补bug
docs：文档（documentation）
style： 格式方面的优化
refactor：重构
test：测试
chore：构建过程或辅助工具的变动
subject
subject是 commit 目的的简短描述，不能超过50个字符，且结尾不加英文句号。
如果type为feat和fix，则该 commit 将肯定出现在 Change log 之中。
参考：
https://conventional-changelog.github.io/commitlint/#/
https://conventional-changelog.github.io/commitlint/#/reference-rules</subject></type></p> <p>链接：https://www.jianshu.com/p/8efa36c5dfd4</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新时间:</span> <span class="time">4/28/2022, 9:43:11 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.016ecbb7.js" defer></script><script src="/blog/assets/js/2.928a6fe7.js" defer></script><script src="/blog/assets/js/8.c67934ea.js" defer></script>
  </body>
</html>
